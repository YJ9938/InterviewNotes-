## 0314

linux的进程间通信和windows有何不同

Linux

- 进程间通信：管道、信号、消息队列、共享内存、信号量、socket
- 线程间：信号、条件变量

Windows

- 进程间：管道、共享内存、消息队列、信号量、Socket

- 线程间：临界区、互斥量、信号量、事件

  



## 0302

Linux 查看端口

**netstat 网络连接查看命令 主要查看 TCP UDP连接状态**

~~~shell
# 查看当前机器哪些端口打开了
netstat -tlnp （作为服务器监听的端口
# -t或--tcp 显示TCP传输协议的连线状况
# -l或--listening 显示监控中的服务器的Socket
# -a 显示所有状态
# -n或--numeric 直接使用IP地址，而不通过域名服务器
# -p或--programs 显示正在使用Socket的程序识别码和程序名称
~~~

![linux02](D:\02实习\02Notes\InterviewNotes\笔记图片\linux02.png)



**lsof 查看端口对应pid（然后可以终止对应进程**

~~~shell
lsof
lsof -i #显示所有网络连接
lsof -i :22 #查看端口22的pid
lsof -u root # 查看指定用户打开的应用信息
	lsof -u root | less
~~~



**top 显示当前系统概况和进程状态 并实时刷新**

~~~shell
交互命令
# M 按内存使用率进行排序
# P 按处理器占有率排序
# b 高亮显示运行中的进程

top -c 显示进程绝对路径
top -d 1 1s刷新一次
top -u xxx 显示指定的用户进程

~~~





**ps 查看当前系统进程的状态**

**ps aux**

~~~shell
ps 
# 不使用参数 只显示前台的进程
ps -ef
# -e 显示所有进程  -f详细信息

ps aux （推荐
# a输出前台进程  x输出后台进程
# u 输出user信息

#进程状态
R Runnable 正在运行 或在运行队列中
S sleeping （中断） 休眠中，等待被唤醒
Z Zombie 僵尸进程
~~~





linux匹配

**grep 查找文件里符合条件的字符串或正则表达式**

~~~shell
grep 
# -n 显示匹配的行号
# -i 忽略大小写  -r 递归查找子目录中文件
# -l 只打印匹配的文件名  -c 只打印匹配的行数
# -v 显示不包含匹配文本的所有行
~~~

![linux03](D:\02实习\02Notes\InterviewNotes\笔记图片\linux03.png)



**find 在指定目录下查找文件**

任何位于参数之前的字符串都将被视为欲查找的目录名

~~~shell
find

find /etc -name passwd
# 在etc目录下 查找以 passwd命名的文件
# 返回 对应文件的绝对路径
# -iname 会忽略大小写
~~~



正则表达式

~~~shell
$ #匹配输入字符串的结尾位置   比如  FS$ 匹配以FS$结尾的
* #匹配前面的子表达式零次或多次
+ #匹配前面的子表达式一次或多次
？ #匹配前面的子表达式 零次或一次 
do(es)? 可以匹配 "do" 、 "does"、 "doxy" 中的 "do" 和 "does"
~~~





## 什么是gcc

**gcc 它是一个能够编译多种语言的编译器**

**工作流程**

- 预处理 

  宏替换、**头文件展开**、去掉注释、.c文件变成了.i文件（本质上还是.c文件，#include中的程序给链接进去

- 编译

  gcc调用不同语言的编译器、.i文件编程.s（汇编文件）、**生成汇编文件**

- 汇编

  .s文件转化成.o文件、**翻译成机器语言指令**、二进制文件

- 链接

  .o文件变成可执行文件，一般不加后缀

![linux01](D:\02实习\02Notes\1准备暑期实习\笔记图片\linux01.png)



# linux权限相关问题

- 改变文件权限命令

  > chmod 权限数字（如777） filename

- 改变目录下所有的文件的权限命令

  > chmod -R 权限数字（如777） 目录(如/home)



# Linux操作系统中断

**中断概念** 指在CPU正常运行期间，由于内外部事件或由程序预先安排的事件引起的CPU暂时停止正在运行的程序，**转而为**该内部或外部事件或预先安排的事件**服务的程序中去**，服务完毕后再返回去继续运行被暂时中断的程序，这样的中断机制极大的提高了CPU运行效率

**硬中断**是我们通常所说的中断的概念；硬中断是由硬件产生的，比如，像磁盘，网卡，键盘，时钟等

**软中断**是由当前正在运行的进程所产生的；这种中断是一种**需要内核为正在运行的进程去做一些事情**（通常为I/O）的请求



## 系统调用过程

用户空间的程序无法直接执行内核代码，它们不能直接调用内核空间中的函数；应用程序以某种方式通知系统，告诉内核自己需要执行一个系统调用，希望系统切换到内核态，这样内核就可以代表应用程序来执行该系统调用了

通知内核的机制是靠软件中断实现的



## 系统调用和函数调用区别

**库函数调用** 主要通过压栈出栈的操作，面向应用开发；库函数是把常用到的函数编完放到一个文件里，供别人用

**系统调用** 用户在程序中调用操作系统所提供的一个子功能，也就是系统API，系统调用可以被看做特殊的公共子程序；用户程序可以通过这组“特殊”接口来获得操作系统内核提供的服务，系统中的各种共享资源都由操作系统统一掌管，因此在用户程序中，凡是与资源有关的操作都必须通过系统调用方式向操作系统提出服务请求，并由操作系统代为完成



## Linux命令

~~~shell
ls
mkdir
pwd
rm
cd
cp
mv

======
top
tar
df
netstat
ip

~~~



